<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>RXtoRINEX: GNSSDataAcq Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RXtoRINEX
   &#160;<span id="projectnumber">V2.0</span>
   </div>
   <div id="projectbrief">RXtoRINEX provides tools to collect data from GPS / GNSS receivers in mobile devices, convert them to RINEX or RTK formats, and process RINEX files.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_g_n_s_s_data_acq-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GNSSDataAcq Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_g_n_s_s_data_acq_8h_source.html">GNSSDataAcq.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aafeeebf1969b59c358d03c6b8f34e15f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#aafeeebf1969b59c358d03c6b8f34e15f">GNSSDataAcq</a> (string rcv, int minxfix, bool bias, FILE *f, <a class="el" href="class_logger.html">Logger</a> *pl)</td></tr>
<tr class="separator:aafeeebf1969b59c358d03c6b8f34e15f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7917334dd43ba1563c69b4e3fb958633"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#a7917334dd43ba1563c69b4e3fb958633">GNSSDataAcq</a> (string rcv, int minxfix, bool bias, FILE *f)</td></tr>
<tr class="separator:a7917334dd43ba1563c69b4e3fb958633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450d50294c01eab00dcf51003a099fd4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#a450d50294c01eab00dcf51003a099fd4">~GNSSDataAcq</a> (void)</td></tr>
<tr class="separator:a450d50294c01eab00dcf51003a099fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5df0d100478f40777c87119901f2638"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#ab5df0d100478f40777c87119901f2638">acqHeaderData</a> (<a class="el" href="class_rinex_data.html">RinexData</a> &amp;)</td></tr>
<tr class="separator:ab5df0d100478f40777c87119901f2638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8690ce65687d874332d8cc7f3608480"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#ae8690ce65687d874332d8cc7f3608480">acqHeaderData</a> (<a class="el" href="class_r_t_kobservation.html">RTKobservation</a> &amp;)</td></tr>
<tr class="separator:ae8690ce65687d874332d8cc7f3608480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb34cf5cb73a0b507a78c9e4e348d82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#abbb34cf5cb73a0b507a78c9e4e348d82">acqEpochData</a> (<a class="el" href="class_rinex_data.html">RinexData</a> &amp;, bool, bool)</td></tr>
<tr class="separator:abbb34cf5cb73a0b507a78c9e4e348d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a184bc1db534e3fd44fafc656f581d68c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_n_s_s_data_acq.html#a184bc1db534e3fd44fafc656f581d68c">acqEpochData</a> (<a class="el" href="class_r_t_kobservation.html">RTKobservation</a> &amp;)</td></tr>
<tr class="separator:a184bc1db534e3fd44fafc656f581d68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_g_n_s_s_data_acq.html">GNSSDataAcq</a> class defines data and methods used to acquire header and epoch data from a binary file containing receiver messages. Header and epoch data can be used to generate and print RINEX or RTK files. </p>
<p>A program using <a class="el" href="class_g_n_s_s_data_acq.html">GNSSDataAcq</a> would perform the following steps:</p><ol type="1">
<li>Declare a <a class="el" href="class_g_n_s_s_data_acq.html">GNSSDataAcq</a> object stating the receiver, the file name with the binary messages containing the data to be acquired, and optionally the logger to be used</li>
<li>Acquire header data to be placed in the header of the output file (RINEX or RTK)</li>
<li>As header data may be sparse among the binary file, rewind it before performing any other data acquisition</li>
<li>Iterate epoch by epoch acquiring its data until end of file reached </li>
</ol>
<p>This version implements acquisition from binary files containing OSP messages collected from SiRFIV receivers. Each OSP message starts with the payload length (2 bytes) and follows the n bytes of the message payload. </p>
<p>A detailed definition of OSP messages can be found in the document "SiRFstarIV (TM) One Socket Protocol 
 Interface Control Document Issue 9". </p>
<p>Note that messages recorded in the OSP binary file have the structure described in this ICD for the receiver message packets, except that the start sequence (A0 A3), the checksum, and the end sequence (B0 B3) have been removed from the packet. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aafeeebf1969b59c358d03c6b8f34e15f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GNSSDataAcq::GNSSDataAcq </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>rcv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minxfix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>applBias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_logger.html">Logger</a> *&#160;</td>
          <td class="paramname"><em>pl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a <a class="el" href="class_g_n_s_s_data_acq.html">GNSSDataAcq</a> object using parameters passed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rcv</td><td>the receiver name </td></tr>
    <tr><td class="paramname">minxfix</td><td>the minimum of satellites required for a fix to be considered valid </td></tr>
    <tr><td class="paramname">applBias</td><td>when true, apply clock bias obtained by receiver to correct observables, when false, do not apply them. </td></tr>
    <tr><td class="paramname">f</td><td>the FILE pointer to the input OSP binary file </td></tr>
    <tr><td class="paramname">pl</td><td>a pointer to the <a class="el" href="class_logger.html">Logger</a> to be used to record logging messages </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7917334dd43ba1563c69b4e3fb958633"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GNSSDataAcq::GNSSDataAcq </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>rcv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minxfix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>applBias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a <a class="el" href="class_g_n_s_s_data_acq.html">GNSSDataAcq</a> object using parameters passed, and logging data into the stderr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rcv</td><td>the receiver name </td></tr>
    <tr><td class="paramname">minxfix</td><td>the minimum of satellites required for a fix to be considered </td></tr>
    <tr><td class="paramname">applBias</td><td>when true, apply clock bias obtained by receiver to correct observables, when false, do not apply them. </td></tr>
    <tr><td class="paramname">f</td><td>the FILE pointer to the input OSP binary file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a450d50294c01eab00dcf51003a099fd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GNSSDataAcq::~GNSSDataAcq </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys a <a class="el" href="class_g_n_s_s_data_acq.html">GNSSDataAcq</a> object </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abbb34cf5cb73a0b507a78c9e4e348d82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GNSSDataAcq::acqEpochData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_rinex_data.html">RinexData</a> &amp;&#160;</td>
          <td class="paramname"><em>rinex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useMID15</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useMID8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>acqEpochData extracts observation and time data from binary OSP file messages for a RINEX epoch. Epoch RINEX data are contained in a sequence of {MID28} [MID2] [MID7] messages. </p>
<p>Each MID28 contains observables for a given satellite. Successive MID28 messages belong to the same epoch if they have the same receiver time. In each epoch the receiver sends a MID28 message for each satellite being tracked. </p>
<p>After sending the epoch MID28 messages, the receiver would send a MID2 message containing the computed position solution data. </p>
<p>The epoch finishes with a MID7 message. It contains clock data for the current epoch, including its GPS time. An unexpected end of epoch occurs when a MID28 message shows different receiver time from former received messages. This event would be logged at info level. </p>
<p>The method acquires data reading messages recorded in the binary file according to the above sequence. Epoch data are stored in the RINEX data structure for further generation/printing of RINEX observation records. Method returns when it is read the last message of the current epoch. </p>
<p>Ephemeris data messages (MID15 or MID8) can appear in any place of the input message sequence. Their data would be stored (depending on useMID15 and useMID8 passed values) for further use to generate the RINEX navigation file. </p>
<p>Other messages in the binary file are ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rinex</td><td>the RinexObsData object where data got from receiver will be placed </td></tr>
    <tr><td class="paramname">useMID15</td><td>to acquire (when true) or ignore (when false) navigation data in MID15 messages </td></tr>
    <tr><td class="paramname">useMID8</td><td>to acquire (when true) or ignore (when false) navigation data in MID8 messages </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true when observation data from an epoch have been acquired, false otherwise (End Of File reached) </dd></dl>

</div>
</div>
<a class="anchor" id="a184bc1db534e3fd44fafc656f581d68c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GNSSDataAcq::acqEpochData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_t_kobservation.html">RTKobservation</a> &amp;&#160;</td>
          <td class="paramname"><em>rtko</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>acqEpochData acquires epoch position data from binary OSP file messages for RTK observation files. Epoch RTK data are contained in a MID2 message. </p>
<p>The method skips messages from the input binary file until a MID2 message is read. When this happens, it stores MID2 data in the <a class="el" href="class_r_t_kobservation.html">RTKobservation</a> object passed and returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rtko</td><td>the <a class="el" href="class_r_t_kobservation.html">RTKobservation</a> object where data acquired will be placed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if epoch position data properly extracted, false otherwise (End Of File reached) </dd></dl>

</div>
</div>
<a class="anchor" id="ab5df0d100478f40777c87119901f2638"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GNSSDataAcq::acqHeaderData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_rinex_data.html">RinexData</a> &amp;&#160;</td>
          <td class="paramname"><em>rinex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>acqHeaderData extracts data from the binary OSP file for RINEX file header. The RINEX header data to be extracted from the binary file are:</p><ul>
<li>the receiver identification contained in the first MID6 message</li>
<li>the initial X,Y,Z position contained in the first MID2 message</li>
<li>the time of first epoch contained in the first valid MID7 message</li>
<li>the measurement interval, computed as the time difference between two consecutive valid MID7 </li>
</ul>
<p>The method iterates over the input file extracting messages until above describe data are acquired or it reaches the end of file. </p>
<p>It logs at FINE level a message stating which header data have been acquired or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rinex</td><td>the <a class="el" href="class_rinex_data.html">RinexData</a> object where data got from receiver will be placed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all above described header data are properly extracted, false otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ae8690ce65687d874332d8cc7f3608480"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GNSSDataAcq::acqHeaderData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_r_t_kobservation.html">RTKobservation</a> &amp;&#160;</td>
          <td class="paramname"><em>rtko</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>acqHeaderData extracts data from the binary OSP file for a RTK file header. The RTK header data to be extracted from the binary file are:</p><ul>
<li>the time of first computed solution contained in the first valid MID2 message</li>
<li>the time of last computed solution contained in the last valid MID2 message</li>
<li>the elevation and SNR masks used by the receiver contained in the first valid MID19 message </li>
</ul>
<p>The method iterates over the input file extracting messages until above describe data are acquired or it reaches the end of file. </p>
<p>It logs at FINE level a message stating which header data have been acquired or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rtko</td><td>the <a class="el" href="class_r_t_kobservation.html">RTKobservation</a> object where data got from receiver will be placed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all above described header data are properly extracted, false otherwise </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>CommonClasses/src/<a class="el" href="_g_n_s_s_data_acq_8h_source.html">GNSSDataAcq.h</a></li>
<li>CommonClasses/src/<a class="el" href="_g_n_s_s_data_acq_8cpp.html">GNSSDataAcq.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 30 2016 18:01:22 for RXtoRINEX by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
