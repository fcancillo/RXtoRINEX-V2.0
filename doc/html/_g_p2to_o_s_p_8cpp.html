<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>RXtoRINEX: Commands/src/GP2toOSP.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RXtoRINEX
   &#160;<span id="projectnumber">V2.0</span>
   </div>
   <div id="projectbrief">RXtoRINEX provides tools to collect data from GPS / GNSS receivers in mobile devices, convert them to RINEX or RTK formats, and process RINEX files.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b56bc70d6f175f70aa8be9ffda7ded2c.html">Commands</a></li><li class="navelem"><a class="el" href="dir_643c3b328fab940839eb7e9d0d28ed05.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GP2toOSP.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_arg_parser_8h_source.html">ArgParser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_logger_8h_source.html">Logger.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_g_p2to_o_s_p_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains the command line program to generate an OSP file with SiRF IV receiver messages from a GP2 debug file obtained from Android devices, like the smartphone Samsung Galaxy S2. </p>
<p>Usage: </p>
<p>GP2toOSP.exe {options} </p>
<p>Options are:</p><ul>
<li>-D TODATE or &ndash;todate=TODATE : To date (dd/mm/aaaa). Default value TODATE = 31/12/2020</li>
<li>-d FROMDATE or &ndash;fromdate=FROMDATE : From date (dd/mm/aaaa). Default value FROMDATE = 01/01/2014</li>
<li>-i INFILE or &ndash;infile=INFILE : GP2 input file. Default value INFILE = SLCLog.GP2</li>
<li>-h or &ndash;help : Show usage data and stops. Default value HELP=FALSE</li>
<li>-l LOGLEVEL or &ndash;llevel=LOGLEVEL : Maximum level to log (SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST). Default value LOGLEVEL = INFO</li>
<li>-o OUTFILE or &ndash;outfile=OUTFILE : OSP binary output file. Default value OUTFILE = DATA.OSP</li>
<li>-T TOTIME or &ndash;totime=TOTIME : To time (hh:mm:sec). Default value TOTIME = 23:59:59</li>
<li>-t FROMTIME or &ndash;fromtime=FROMTIME : From time (hh:mm:sec). Default value FROMTIME = 00:00:00</li>
<li>-w WMSG or &ndash;wmsg=WMSG : Wanted messages MIDs (a comma separated list, ALL, RINEX, or RINEX,list. Default value WMSG = RINEX </li>
</ul>
<p>Copyright 2015 Francisco Cancillo </p>
<p>This file is part of the RXtoRINEX tool. </p>
<p>RXtoRINEX is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. RXtoRINEX is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. A copy of the GNU General Public License can be found at <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<p>Ver. |Date |Reason for change ---&mdash;+----&mdash;+---------------&mdash; V1.0 |2/2015 |First release V1.1 |2/2016 |Minor improvements for logging messages </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>main gets the command line arguments, set parameters accordingly and translates data from the input GP2 file format to the output OSP file. Input data are contained in a SCLog.gp2 debug file generated by Android OS when the option DEBUGGING_FILES=1 is set in the sirfgps.conf file of some devices, like the Samsung Galaxy S2 smartphone. </p>
<p>Each line in the GP2 file has format as per the following example: </p>
<p>29/10/2014 20:31:08.942 (0) A0 A2 00 12 33 06 00 00 00 00 00 00 00 19 00 00 00 00 00 00 64 E1 01 97 B0 B3 </p>
<p>Where:</p><ul>
<li>Time tag: 29/10/2014 20:31:08.942</li>
<li>Unknown: (0)</li>
<li>Head: A0 A2</li>
<li>Payload length: 00 12</li>
<li>Payload: 33 06 00 00 00 00 00 00 00 19 00 00 00 00 00 00 64 E1</li>
<li>Checksum: 01 97</li>
<li>Tail: B0 B3 Note that in above format, data from "head" to "tail" is an OSP messages with values written in hexadecimal. A detailed definition of OSP messages can be found in the document "SiRFstarIV™ One Socket Protocol Interface Control Document
 Issue 9" from CSR Inc. </li>
</ul>
<p>The binary OSP output files contain messages where head, check and tail have been removed, that is, the data for each message consists of the two bytes of the payload length and the payload bytes. </p>
<p>Input data are processed according to the following criteria:</p><ul>
<li>Lines with incorrect message format are skipped. To be correct, a message shall start with A0A2, end with B0B3, its length shall match the number of bytes in the payload, and the computed payload checksum shall be equal to provided checksum.</li>
<li>Lines with time tag outside the time interval of validity are skipped. By default this interval is [01/01/2014 00:00:00 , 31/12/2020 23:59:59]. A different time interval can be defined using the related command options.</li>
<li>Lines containing messages with MID not in the list of "wanted MIDs" are skipped. By default this list includes the MID values used to generate RINEX files (2,6,7,56,8,11,12,15,28,50,64,75). A different list can be defined using the related command options. Possibility exists to not filter messages (ALL MID wanted).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>the number of arguments passed from the command line </td></tr>
    <tr><td class="paramname">argv</td><td>the array of arguments passed from the command line </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the exit status according to the following values and meaning:<ul>
<li>(0) no errors have been detected</li>
<li>(1) an error has been detected in arguments</li>
<li>(2) error when opening the input file</li>
<li>(3) error when creating output file </li>
</ul>
</dd></dl>
<p>The main process sequence follows:</p>
<p>1- Defines and sets the error logger object</p>
<p>2- Setups the valid options in the command line. They will be used by the argument/option parser</p>
<p>3- Parses arguments in the command line extracting options and operators</p>
<p>4- Sets logging level stated in option</p>
<p>5- Sets the list of wanted messages</p>
<p>6- Sets start and end time of the time interval for messages wanted</p>
<p>7- Opens the SP2 input file</p>
<p>8- Creates the OSP binary output file</p>
<p>9- Extracts/verifies/filters line by line messages from the SP2 file and translate/write them into OSP format </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 3 2016 12:50:07 for RXtoRINEX by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
